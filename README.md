# VBI HPC EasyBuild

## Introduction

This is an EasyBuild setup for VBI HPC resources. It provides a way to easily maintain large number of scientific software and make it accessible to our users.

This directory is typically found in `/apps/easybuild`. The git repository contains only setup files, basic structure, and module files. Module files include both maintained by VBI, and ones automatically generated by EasyBuild.

EasyBuild has extensive documentation available at [their site](https://easybuild.readthedocs.org/en/latest/)

Eventually this setup will be detailed on our wiki: [VBI wiki - HPC Applications](https://collaboration.vbi.vt.edu/display/HPC/30+-+Applications)


## Using EasyBuild

### Accessing software

* set up environment to access software built by EasyBuild:

```
module load site/shadowfax/easybuild/setup
```

* list all available modules:

```
module avail
```

### Installing new software

##### end-users

Besides having access to software maintained by VBI under `/apps/easybuild`, users can install additional software via EasyBuild in their `~/easybuild/` directory. Our environment module sets up all required paths.

To get started, load the setup module and EasyBuild:

```
module load site/shadowfax/easybuild/setup
module load EasyBuild
```

Now you can run `eb` to search and install new software. 

* basic `eb` usage:
  * search for cufflinks
  ```
  eb -S cufflinks
  ```
  * install cufflinks
  ```
  eb Cufflinks-2.2.1-goolf-1.4.10.eb --robot
  ```

#### system administrators

To maintain software in `/apps/easybuild` location we load a slightly different module to set up the environment. The only difference between `hpcadmin` and `setup` modules are:

* hpcadmin module sets up different permissions and groups
* hpcadmin module points only to global paths, and doesn't include anything from `~/easybuild` location


To get started, change your effective group and umask, then load the setup and EasyBuild modules:

```
newgrp hpcadmin
umask 002
module load site/shadowfax/easybuild/hpcadmin
module load EasyBuild
```

* basic `eb` usage:
  * search for cufflinks
  ```
  eb -S cufflinks
  ```
  * install cufflinks
  ```
  eb Cufflinks-2.2.1-goolf-1.4.10.eb --robot
  ```

* review and commit your changes after installing software:

```
cd /apps/easybuild
git status
git add <appropriate dirs or files>
git commit -m 'installed Cufflinks-2.2.1-goolf-1.4.10'
```

